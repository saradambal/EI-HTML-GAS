<!--//*******************************************FILE DESCRIPTION*********************************************//
//************************************CARD ASSIGN***********************************************//
//DONE BY:SAFIYULLAH.M
//VER 1.1-SD:07/07/2014 ED:09/06/2014;TRACKER NO:779;UPDTAED RESET FUNCTION
//VER 1.0-SD:11/06/2014 ED:11/06/2014;TRACKER NO:779;updated failure msg
//VER 0.09-SD:06/06/2014 ED:06/06/2014;TRACKER NO:779;CHANGED JQUERY LINK
//VER 0.08-SD:05/05/2014 ED:06/05/2014:TRACKER NO:779;UPDATED DYNAMIC TEMP TABLE 
VER 0.07-SD;21/04/2014 ED:23/04/2014;TRACKER NO:779;updated script to show error msg if active card is assigned returned from sp,alignment corrected
VER 0.06-SD;10/03/2014 ED:12/03/2014;TRACKER NO:730;implement array concept.
VER 0.05-SD;31/01/2014 ED:04/02/2014;TRACKER NO:730;Issues corrected,updated error msg getting from eilib and added convert function for spl char.
VER 0.04-SD;20/01/2014 ED:21/01/2014;TRACKER NO:712;Added the failure handler when assign card and added SD and Ed for Rec ver;
VER 0.03-SD:20/12/2013 ED:28/12/2013;TRACKER NO: 339;Applied SP and changes made in design and change identifier
VER 0.02 - SD:21/09/2013 ED:01/10/2013;TRACKER NO: 339;CHANGED CONNECTION STRING AND REMOVED SCRIPLET
VER 0.01 - INITIAL VERSION-SD:31/07/2013 ED:03/09/2013;TRACKER NO: 339
//*********************************************************************************************************//
-->
<!--HTML TAG START-->
<html>
<!--HEAD TAG START-->
<head>
<!-----------------------------COMMON JQUERY LINKS START-------------------------->
<!--TO SUPPORT DATE PICKER CSS-->
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css">
<!--TO SUPPORT JQUERY FUNCTIONALITIES-->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<!--TO SUPPORT JQUERY UI FUNCTIONALITIES-->
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/jquery-ui.min.js"></script>
<script src="http://code.jquery.com/jquery-migrate-1.11.1.min.js"></script>
<!-----------------------------COMMON JQUERY LINKS END----------------------------->
<!--TO SUPPORT JQUERY LIB VALIDATION-->
<script src="https://googledrive.com/host/0B5pkfK_IBDxjU1FrR3hVTXB4a28/JQuery.js"></script>
<!--TO SUPPORT FORM CSS-->
<link rel="stylesheet" href="https://googledrive.com/host/0B5pkfK_IBDxjU1FrR3hVTXB4a28/StyleSheet.css">
<script>
$(document).ready(function(){
$(".preloader").show();
var CCARD_available_card=[];
var CCARD_allcust_values=[];
var CCARD_errorAarray=[];
var CCARD_cust_id;
$('#CCARD_btn_submitbutton').hide();
$('#CCARD_btn_resetbutton').hide();
google.script.run.withFailureHandler(CCARD_error).withSuccessHandler(CCARD_load_initial_values).CCARD_getinitial_values()

//**************GET CUSTOMER NAME FOR THE SELECTED UNIT
$('#CCARD_lb_selectunit').change(function(){
var CCARD_unit = $(this).val();
if(CCARD_unit=='SELECT'){
$('#CCARD_div_cardassigned').hide();
$('#CCARD_tble_avail_cardno tr').remove();
$('#CCARD_tble_guest_cardno tr').remove();
$('input:radio[name=CCARD_selectcard]').attr('checked',false);
$('#CCARD_tble_id tr').remove();
$('#CCARD_btn_submitbutton').attr("disabled","disabled");
$('input:radio[name=ccard_id]').attr('checked',false);
$('#CCARD_lb_selectname').hide();
$('#CCARD_lb_selectname').prop('selectedIndex',0);
$('#CCARD_lbl_cname').hide();
$('#CCARD_lbl_error').hide();
$('#CCARD_btn_submitbutton').hide();
$('#CCARD_btn_resetbutton').hide();
$('#CCARD_tble_recver').hide();
$('#CCARD_lbl_err').hide();
}
else
{
$('#CCARD_div_cardassigned').hide();
$('#CCARD_lbl_error').hide();
$('input:radio[name=CCARD_selectcard]').attr('checked',false);
$('#CCARD_tble_id tr').remove();
$('#CCARD_tble_avail_cardno tr').remove();
$('#CCARD_tble_guest_cardno tr').remove();
$('#CCARD_btn_submitbutton').attr("disabled","disabled");
$('input:radio[name=CCARD_selectcard]').attr('checked',false);
$('#CCARD_lb_selectname').hide();
$('#CCARD_lb_selectname').prop('selectedIndex',0);
$('#CCARD_lbl_cname').hide();
$('#CCARD_lbl_err').hide();
$('#CCARD_btn_submitbutton').hide();
$('#CCARD_btn_resetbutton').hide();
$('#CCARD_tble_recver').hide();
var CCARD_namearray=[];
for(var k=0;k<CCARD_allcust_values.length;k++)
{
if(CCARD_allcust_values[k].unit==CCARD_unit)
{
CCARD_namearray.push(CCARD_allcust_values[k].name);
}
}
CCARD_namearray=unique(CCARD_namearray);
var CCARD_custname_options ='<option>SELECT</option>'
for (var i = 0; i < CCARD_namearray.length; i++) {
var CCARD_myarray=CCARD_namearray[i].split('_');
var CCARD_custname=CCARD_myarray[0]+' '+CCARD_myarray[1];
CCARD_custname_options += '<option value="' + CCARD_namearray[i] + '">' + CCARD_custname + '</option>';
}
$('#CCARD_lb_selectname').html(CCARD_custname_options)
$('#CCARD_lb_selectname').show();
$('#CCARD_lbl_cname').show();
}
});
//***************GET DETAIL'S FOR SELECTED CUSTOMER NAME
$('#CCARD_lb_selectname').change(function(){
var CCARD_name=$(this).val();
if(CCARD_name=='SELECT')
{
$('#CCARD_lbl_error').hide();
$('#CCARD_div_cardassigned').hide();
$('#CCARD_tble_avail_cardno tr').remove();
$('#CCARD_tble_guest_cardno tr').remove();
$('input:radio[name=CCARD_selectcard]').attr('checked',false);
$('#CCARD_tble_id tr').remove();
$('#CCARD_btn_submitbutton').attr("disabled","disabled");
$('input:radio[name=ccard_id]').attr('checked',false);
$('#CCARD_btn_submitbutton').hide();
$('#CCARD_btn_resetbutton').hide();
$('#CCARD_tble_recver').hide();
$('#CCARD_lbl_err').hide();
}
else{
$(".preloader").show();
$('#CCARD_lbl_error').hide();
$('#CCARD_div_cardassigned').hide();
$('#CCARD_lbl_err').hide();
$('#CCARD_tble_avail_cardno tr').remove();
$('#CCARD_tble_guest_cardno tr').remove();
$('#CCARD_tble_id tr').remove();
$('#CCARD_btn_submitbutton').hide();
$('#CCARD_btn_resetbutton').hide();
$('#CCARD_btn_submitbutton').attr("disabled","disabled");
$('input:radio[name=CCARD_selectcard]').attr('checked',false);
$('#CCARD_tble_recver').hide();
var CCARD_name_id_array=[];
var CCARD_unit=$('#CCARD_lb_selectunit').val();
for(var k=0;k<CCARD_allcust_values.length;k++)
{
if(CCARD_allcust_values[k].name==CCARD_name && CCARD_allcust_values[k].unit==CCARD_unit)
{
CCARD_name_id_array.push(CCARD_allcust_values[k].customerid);
}
}
CCARD_name_id_array=unique(CCARD_name_id_array);
if(CCARD_name_id_array.length!=1)
{
$(".preloader").hide();
$('#CCARD_tble_personaldetails').hide();      
$('#CCARD_tble_cardno_radio').hide();
$('#CCARD_tble_feedetails').hide();
$('#CCARD_tble_id').show();
$('#CCARD_tble_recver').hide();
var CCARD_customername=$('#CCARD_lb_selectname').val();
var CCARD_myarray=CCARD_customername.split('_');
var CCARD_custname=CCARD_myarray[0]+' '+CCARD_myarray[1];
var CCARD_radio_value='';
for (var i = 0; i < CCARD_name_id_array.length; i++) {
var final=CCARD_custname+' '+CCARD_name_id_array[i]
CCARD_radio_value = '<tr id=123><td><input type="radio" name="custid" id='+CCARD_name_id_array[i]+' value='+CCARD_name_id_array[i]+' class="CCARD_class_custid" /></td><td>' + final + '</td></tr>';
$('#CCARD_tble_id').append(CCARD_radio_value);
}
}
else{
CCARD_cust_id=CCARD_name_id_array[0]
CCARD_load_customer_recver(CCARD_name_id_array[0]);
$('#CCARD_tble_id tr').remove();
}
}
});
//**************GET AVAILABLE CARD's FOR SELECTED UNIT
$('.radio_selected').change(function(){
var radio=$("input[name=CCARD_selectcard]:checked").val()
$('#CCARD_tble_avail_cardno tr').remove();
$('#CCARD_tble_avail_cardno').hide();
$('#CCARD_lbl_error').hide();
var CCARD_unit=$('#CCARD_lb_selectunit').val();
var CCARD_fname=$('#CCARD_tb_firstname').val();
var CCARD_lname=$('#CCARD_tb_lastname').val();
var CCARD_recver=$('#CCARD_lb_selecrecver').val();
//**************HANDLER TO LOAD AVAILABLE CARD's
if(radio=='CARD'){
$('#CCARD_btn_submitbutton').attr("disabled","disabled");
$(".preloader").show();
CCARD_load_availablecards(available_card)
}
else{
$('#CCARD_btn_submitbutton').removeAttr('disabled');
}
})
$('#CCARD_lb_selectname').hide();
$('#CCARD_lbl_cname').hide();
$('#CCARD_tble_personaldetails').hide();
$('#CCARD_tble_cardno_radio').hide();
$('#CCARD_tble_avail_cardno').hide();
$('#CCARD_tble_feedetails').hide();
$('#CCARD_tble_id').hide();
$('#CCARD_tble_guest_cardno tr').remove();
//FUNCTION TO LOAD INITIAL VALUES
 function CCARD_load_initial_values(CCARD_initialvalues_result) 
 { 
 CCARD_errorAarray=CCARD_initialvalues_result[0].CCARD_error_msg;
 CCARD_allcust_values=CCARD_initialvalues_result[0].CCARD_allcust_values; 
 if(CCARD_allcust_values.length==0)
 { 
 $('#CCARD_form_cardassignform').replaceWith('<p><label class="errormsg"> '+CCARD_errorAarray[4]+'</label></p>'); }
 else
 {
 var CCARD_unit_array=[];
 var CCARD_unitno_options ='<option>SELECT</option>'
 for(var k=0;k<CCARD_allcust_values.length;k++)
{
CCARD_unit_array.push(CCARD_allcust_values[k].unit)
}
CCARD_unit_array=unique(CCARD_unit_array);
 for (var i = 0; i < CCARD_unit_array.length; i++) {

CCARD_unitno_options += '<option value="' + CCARD_unit_array[i] + '">' + CCARD_unit_array [i]+ '</option>';
} 
 $('#CCARD_lb_selectunit').html(CCARD_unitno_options);
 }
$('#CCARD_lbl_unitno').show();
 $('#CCARD_lb_selectunit').show();
$(".preloader").hide(); 
 }
function unique(a) {
var result = [];
$.each(a, function(i, e) {
if ($.inArray(e, result) == -1) result.push(e);
});
return result;
}
//*****************FUNCTION TO CALL TO DISPLAY AVAILABLE CARD'S
function CCARD_load_availablecards(CCARD_result_card)
{
$(".preloader").hide();
CCARD_available_card=CCARD_result_card;
var CCARD_cust_cardarray=[];var CCARD_availablecard_array=[];
CCARD_cust_cardarray=CCARD_result_card[0];CCARD_availablecard_array=CCARD_result_card[1];
if(CCARD_availablecard_array.length==0 &&CCARD_cust_cardarray.length==0)
{
$('#CCARD_lbl_error').text(CCARD_errorAarray[0])
$('#CCARD_lbl_error').css("color","red");
$('#CCARD_lbl_error').show();
$('input:radio[name=CCARD_selectcard]').attr('checked',false);
}
else{
var unit=$('#CCARD_lb_selectunit').val();
if(CCARD_cust_cardarray.length!=0){
$('#CCARD_radio_selectcard').attr('checked',true)
CCARD_show_cards(CCARD_result_card)
}
else{
CCARD_show_cards(CCARD_result_card)
}
}
}
///////////////////*********** FUNCTION TO SHOW AVAILABLE CARD'S***********/////////////
function CCARD_show_cards(CCARD_result_card)
{
var CCARD_gcardarray=[];
CCARD_gcardarray=CCARD_result_card[0]
var CCARD_cardArray= [];
CCARD_cardArray=CCARD_result_card[1];
var CCARD_cardlbl_array=[];
 CCARD_cardlbl_array=CCARD_result_card[2];
$('#CCARD_tble_avail_cardno tr').remove();
if(CCARD_gcardarray.length!=0){
for(var j=0;j<CCARD_gcardarray.length;j++){
var CCARD_checkboxid1='CCARD_cb_cardnumber'+j;
var CCARD_listboxid='CCARD_lb_selectnamelist'+j;
var va='CCARD_ta_selectnamelist1'+j;
var CCARD_myarray=CCARD_gcardarray[j].split('/');
var CCARD_cust_cardno=CCARD_myarray[0];
if(j==0){
var CCARD_custname=CCARD_myarray[1]
var CCARD_custname1=CCARD_custname.replace(/__/g," ")
var name=CCARD_custname1.split('_');
var customername=name[0]+' '+name[1]
}
else
{
var CCARD_custname=CCARD_myarray[1]+j;
}
if(CCARD_cardArray.length==0&&CCARD_gcardarray.length==1){
var CCARD_cardno1 ='<tr><td >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="checkbox" value='+CCARD_cust_cardno+' id='+CCARD_checkboxid1+' name="checkbox"    class="CCARD_class_cardnumber" checked="checked" disabled  />' + CCARD_cust_cardno + '</td><td><select id='+CCARD_listboxid+' name="CCARD_selectnamelist"     class="CCARD_class_cardnumber" disabled  /></td><td><input type="text" id='+va+' name="CCARD_selectnamelist1" value='+CCARD_gcardarray[j]+' hidden    /></td></tr>';
}
else
{
var CCARD_cardno1 ='<tr><td >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="checkbox" value='+CCARD_cust_cardno+' id='+CCARD_checkboxid1+' name="checkbox"    class="CCARD_class_cardnumber" checked="checked"   />' + CCARD_cust_cardno + '</td><td><select id='+CCARD_listboxid+' name="CCARD_selectnamelist"     class="CCARD_class_cardnumber" disabled  /></td><td><input type="text" id='+va+' name="CCARD_selectnamelist1" value='+CCARD_gcardarray[j]+' hidden    /></td></tr>';
}
$('#CCARD_tble_avail_cardno').append(CCARD_cardno1);
$('#CCARD_tble_avail_cardno').show();
var options ='<option>SELECT</option>'
if(j==0){
options+='<option value=' + CCARD_custname + '>' + customername + '</option>'
}
else{

options+='<option value=' + CCARD_custname + '>' + CCARD_custname + '</option>'
}
$('#CCARD_lb_selectnamelist'+j).html(options);
$('#CCARD_lb_selectnamelist'+j).prop('selectedIndex',1)
}
for (var i=0;i<CCARD_cardArray.length;i++) 
{
var CCARD_listboxid='CCARD_lb_selectnamelist'+j;
var CCARD_checkboxid1='CCARD_cb_cardnumber'+j;
var va='CCARD_ta_selectnamelist1'+j;
if(CCARD_gcardarray.length==4)
{
var CCARD_cardno ='<tr><td >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="checkbox" value='+CCARD_cardArray[i]+' id='+CCARD_checkboxid1+' name="checkbox"    class="CCARD_class_cardnumber" disabled  />' + CCARD_cardArray[i] + '</td><td><select id='+CCARD_listboxid+' name="CCARD_selectnamelist"     class="CCARD_class_cardnumber" visibility: hidden;   /></td><td><input type="text" id='+va+' name="CCARD_selectnamelist1" hidden   /></td></tr>';

}
else{
var CCARD_cardno ='<tr><td >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="checkbox" value='+CCARD_cardArray[i]+' id='+CCARD_checkboxid1+' name="checkbox"    class="CCARD_class_cardnumber"   />' + CCARD_cardArray[i] + '</td><td><select id='+CCARD_listboxid+' name="CCARD_selectnamelist"     class="CCARD_class_cardnumber" visibility: hidden;   /></td><td><input type="text" id='+va+' name="CCARD_selectnamelist1"  hidden  /></td></tr>';
}
$('#CCARD_tble_avail_cardno').append(CCARD_cardno);
$('#CCARD_tble_avail_cardno').show();
var options ='<option>SELECT</option>'
for(var k=0;k<CCARD_cardlbl_array.length;k++)
{
options += '<option value="' + CCARD_cardlbl_array[k] + '">' + CCARD_cardlbl_array[k] + '</option>';
}
$('#CCARD_lb_selectnamelist'+j).html(options);
j++
}
}
if(CCARD_gcardarray.length==0){
for (var i=0;i<CCARD_cardArray.length;i++) 
{
var CCARD_listboxid='CCARD_lb_selectnamelist'+i;
var CCARD_checkboxid1='CCARD_cb_cardnumber'+i;
var va='CCARD_ta_selectnamelist1'+i;
var CCARD_cardno ='<tr><td >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="checkbox" value='+CCARD_cardArray[i]+' id='+CCARD_checkboxid1+' name="checkbox"    class="CCARD_class_cardnumber"   />' + CCARD_cardArray[i] + '</td><td><select id='+CCARD_listboxid+' name="CCARD_selectnamelist"     class="CCARD_class_cardnumber"  visibility: hidden; /></td><td><input type="text" id='+va+' name="CCARD_selectnamelist1" hidden   /></td></tr>';
$('#CCARD_tble_avail_cardno').append(CCARD_cardno);
$('#CCARD_tble_avail_cardno').show();
}
for(var i=0;i<CCARD_cardArray.length;i++){
var options ='<option>SELECT</option>'
for(var j=0;j<CCARD_cardlbl_array.length;j++)
{
if(j==0){
var CCARD_custname=CCARD_cardlbl_array[j]
var name=CCARD_custname.split('_');
var customername=name[0]+' '+name[1]
options += '<option value="' + CCARD_custname + '">' +customername+ '</option>';
}
else{
options += '<option value="' + CCARD_cardlbl_array[j] + '">' + CCARD_cardlbl_array[j] + '</option>';
}
}
$('#CCARD_lb_selectnamelist'+i).html(options);
}
}
}
//Function to show Exception
function CCARD_error(CCARD_exception)
{
$(".preloader").hide(); 
$(document).doValidation({rule:'messagebox',prop:{msgtitle:"CUSTOMER CARD ASSIGN",msgcontent:CCARD_exception}});
}
//***********FUNCTION TO CALL TO SHOW CUSTOMER DETAIL'S FROM RADIO BUTTON
$(document).on("change",'.CCARD_class_custid', function ()
{
$(".preloader").show();
var CCARD_customerid=$("input[name=custid]:checked").val();
CCARD_cust_id=CCARD_customerid;
var CCARD_unit=$('#CCARD_lb_selectunit').val();
$('#CCARD_tble_personaldetails').hide();
$('#CCARD_tble_cardno_radio').hide(); 
$('#CCARD_tble_feedetails').hide();
$('#CCARD_lbl_error').hide();
$('#CCARD_tble_avail_cardno tr').remove();
$('#CCARD_tble_guest_cardno tr').remove();
$('input:radio[name=CCARD_selectcard]').attr('checked',false);
$('#CCARD_btn_submitbutton').attr("disabled","disabled");
$('#CCARD_btn_submitbutton').hide();
$('#CCARD_tble_recver').hide();
$('#CCARD_btn_resetbutton').hide();
$('#CCARD_tble_comment').hide();
$('#CCARD_lbl_err').hide();
//******************HANDLER TO GET CUSTOMER DETAIL'S*******************//
CCARD_load_customer_recver(CCARD_customerid);
});
//////////////****************FUNCTION TO LOAD CUSTOMER RECORD VERSION***************************////////////

function CCARD_load_customer_recver(cust_id){
var CCARD_cust_recver=[];
var CCARD_unit=$('#CCARD_lb_selectunit').val();
for(var k=0;k<CCARD_allcust_values.length;k++)
{
if(CCARD_allcust_values[k].customerid==cust_id && CCARD_allcust_values[k].unit==CCARD_unit)
{
CCARD_cust_recver.push(CCARD_allcust_values[k].recver);
}
}
CCARD_cust_recver=unique(CCARD_cust_recver);
//CCARD_cust_recver.sort();
var CCARD_recver_options ='<option>SELECT</option>'
 for (var i = 0; i < CCARD_cust_recver.length; i++) {
var value=CCARD_cust_recver[i].split("_")
CCARD_recver_options += '<option value="' + value[0] + '" title="'+value[1]+"---"+value[2]+'">' + value[0]+ '</option>';
} 
 $('#CCARD_lb_selecrecver').html(CCARD_recver_options);
$('#CCARD_lbl_recver').show();
$('#CCARD_lb_selecrecver').show();
$('#CCARD_tble_recver').show();
$(".preloader").hide();
}
$('#CCARD_lb_selecrecver').change(function(){
var CCARD_recver=$(this).val();
if(CCARD_recver=="SELECT"){
$('#CCARD_lbl_error').hide();
$('#CCARD_div_cardassigned').hide();
$('#CCARD_tble_avail_cardno tr').remove();
$('#CCARD_tble_guest_cardno tr').remove();
$('input:radio[name=CCARD_selectcard]').attr('checked',false);
$('#CCARD_btn_submitbutton').attr("disabled","disabled");
$('#CCARD_btn_submitbutton').hide();
$('#CCARD_btn_resetbutton').hide();
$('#CCARD_lbl_err').hide();
}
else{
$(".preloader").show();
$('#CCARD_lbl_error').hide();
$('#CCARD_div_cardassigned').hide();
$('#CCARD_tble_avail_cardno tr').remove();
$('#CCARD_tble_guest_cardno tr').remove();
$('input:radio[name=CCARD_selectcard]').attr('checked',false);
$('#CCARD_btn_submitbutton').attr("disabled","disabled");
$('#CCARD_btn_submitbutton').hide();
$('#CCARD_btn_resetbutton').hide();
var CCARD_unit=$('#CCARD_lb_selectunit').val();
google.script.run.withFailureHandler(CCARD_error).withSuccessHandler(CCARD_load_customerdetails).CCARD_get_customerdetails(CCARD_recver,CCARD_unit,CCARD_cust_id)
}
});
////////////************ FUNCTION TO LOAD CUSTOMER DETAILS'S***********////////////////////
var available_card;
var CCARD_guest_array
function CCARD_load_customerdetails(data)
{
var CCARD_customerdetails=[];
CCARD_customerdetails=data[0];
 CCARD_guest_array=data[1];
available_card=data[2]
var check_card_flag=data[3];
var check_rec_ver=data[4];
var CCARD_fname_length=(CCARD_customerdetails.firstname).length;
var CCARD_lname_length=(CCARD_customerdetails.lastname).length
var CCARD_email_length=(CCARD_customerdetails.email).length
var CCARD_nation_length=(CCARD_customerdetails.nationality).length;
var CCARD_startdate=CCARD_customerdetails.startdate;
CCARD_startdate=FormTableDateFormat(CCARD_startdate);
var CCARD_enddate=CCARD_customerdetails.enddate;
CCARD_enddate=FormTableDateFormat(CCARD_enddate);
var CCARD_passportdate=CCARD_customerdetails.passportdate;
if(CCARD_customerdetails.company!=null){
var CCARD_companyname_length=(CCARD_customerdetails.company).length;
$('#CCARD_tb_companyname').attr("size",CCARD_companyname_length+9)
}
else{
$('#CCARD_tb_companyname').attr("size",5)
}
if(CCARD_passportdate!=null)
{
CCARD_passportdate=FormTableDateFormat(CCARD_passportdate);
}
var CCARD_dob=CCARD_customerdetails.dob;
if(CCARD_dob!=null){
CCARD_dob=FormTableDateFormat(CCARD_dob);
}
var CCARD_passportdate=CCARD_customerdetails.passportdate;
if(CCARD_passportdate!=null){
CCARD_passportdate=FormTableDateFormat(CCARD_passportdate)
}
var CCARD_epdate=CCARD_customerdetails.epdate;
if(CCARD_epdate!=null){
CCARD_epdate=FormTableDateFormat(CCARD_epdate)
}
var CCARD_noticedate=CCARD_customerdetails.noticedate;
if(CCARD_noticedate!=null){
CCARD_noticedate=FormTableDateFormat(CCARD_noticedate)
}
var CCARD_roomtype_length=(CCARD_customerdetails.roomtype).length;
$('#CCARD_tb_roomtype').attr("size",CCARD_roomtype_length+3);
$('#CCARD_tb_lastname').attr("size",CCARD_lname_length+3);
$('#CCARD_tb_firstname').attr("size",CCARD_fname_length+3);
$('#CCARD_tb_email').attr("size",CCARD_email_length);
$('#CCARD_tb_nation').attr("size",CCARD_nation_length+6);
$('#CCARD_tb_firstname').val(CCARD_customerdetails.firstname);
$('#CCARD_tb_lastname').val(CCARD_customerdetails.lastname);
$('#CCARD_tb_email').val(CCARD_customerdetails.email);$('#CCARD_tb_mobileno').val(CCARD_customerdetails.mobile1);
$('#CCARD_tb_intmobileno').val(CCARD_customerdetails.mobile2);$('#CCARD_tb_officeno').val(CCARD_customerdetails.officeno);
$('#CCARD_tb_dob').val(CCARD_dob);$('#CCARD_tb_passno').val(CCARD_customerdetails.passportno);
$('#CCARD_tb_passdate').val(CCARD_passportdate);$('#CCARD_tb_epno').val(CCARD_customerdetails.epno);
$('#CCARD_tb_epdate').val(CCARD_epdate);$('#CCARD_tb_roomtype').val(CCARD_customerdetails.roomtype);
$('#CCARD_tb_cardno').val(CCARD_customerdetails.cardno);
$('#CCARD_tb_startdate').val(CCARD_startdate);
$('#CCARD_tb_enddate').val(CCARD_enddate);
$('#CCARD_tb_noticeperiod').val(CCARD_customerdetails.noticeperiod);
$('#CCARD_tb_noticedate').val(CCARD_noticedate);$('#CCARD_tb_elect').val(CCARD_customerdetails.electricitycap); 
$('#CCARD_tb_drycleanfee').val(CCARD_customerdetails.drycleanfee);$('#CCARD_tb_checkoutcleaningfee').val(CCARD_customerdetails.checkoutcleaningfee);
$('#CCARD_tb_deposit').val(CCARD_customerdetails.deposit);$('#CCARD_tb_rent').val(CCARD_customerdetails.rental);
$('#CCARD_tb_processingfee').val(CCARD_customerdetails.processingfee);$('#CCARD_ta_comments').val(CCARD_customerdetails.comments);
$('#CCARD_tb_companyname').val(CCARD_customerdetails.company);
$('#CCARD_tb_nation').val(CCARD_customerdetails.nationality);
var CCARD_quaterlyfee=CCARD_customerdetails.airconquartelyfee
var CCARD_fixedfee=CCARD_customerdetails.airconfixedfee
if(CCARD_quaterlyfee==null)
{
$('#CCARD_tb_fixed').val(CCARD_customerdetails.airconfixedfee)
$('#CCARD_lbl_fixedfee').text("AIRCON FIXED FEE")
$('#CCARD_tb_fixed').show();
}
else if(CCARD_fixedfee==null)
{
$('#CCARD_tb_fixed').val(CCARD_customerdetails.airconquartelyfee)
$('#CCARD_lbl_fixedfee').text("AIRCON QUATERLY FEE")
$('#CCARD_tb_fixed').show();
}
if((CCARD_customerdetails.cardno==null)){
$('#CCARD_radio_null').attr("disabled","disabled")
}
else{
CCARD_load_availablecards(available_card)
$('#CCARD_radio_null').removeAttr("disabled")
}
if(CCARD_guest_array.length!=0)
{
var CCARD_value='';
for (var i = 0; i < CCARD_guest_array.length; i++) {
CCARD_value = '<tr ><td style="width:223px"><lable style="width:223px visibility:hidden;" >GUEST '+(i+1)+ ' CARD </lable></td>    <td>    </td><td>   </td>  <td></td><td></td><td></td><td></td><td><input type="text" name="CCARD_tb_cardno" id='+CCARD_guest_array[i]+' value='+CCARD_guest_array[i]+' style="width:50px;"  readonly hidden /></td></tr>';
$('#CCARD_tble_guest_cardno').append(CCARD_value);
}
}
else
{
$('#CCARD_tble_guest_cardno tr').remove();
}
if(check_card_flag==0){
$('#CCARD_tble_personaldetails').show();
$('#CCARD_tble_cardno_radio').show(); 
$('#CCARD_tble_feedetails').show();
$('#CCARD_div_cardassigned').show();
$('#CCARD_btn_submitbutton').show();
$('#CCARD_btn_resetbutton').show();
$('#CCARD_tble_comment').show();
$('#CCARD_lbl_err').hide();
}
else{
$('#CCARD_tble_personaldetails').hide();
$('#CCARD_tble_cardno_radio').hide(); 
$('#CCARD_tble_feedetails').hide();
$('#CCARD_div_cardassigned').hide();
$('#CCARD_btn_submitbutton').hide();
$('#CCARD_btn_resetbutton').hide();
$('#CCARD_tble_comment').hide();
var CCARD_LP=check_rec_ver;
var msg=(CCARD_errorAarray[6]).replace('[LP]',CCARD_LP)
$('#CCARD_lbl_err').text(msg);
$('#CCARD_lbl_err').show();
$('#CCARD_lb_selecrecver').prop('selectedIndex',0);
}
$(".preloader").hide();
}
///////////////********** FUNCTION TO CHECK CARD*************//////////////////
$(document).on("change",'.CCARD_class_cardnumber', function ()
{
var result_card=CCARD_available_card;
var CCARD_cardlist=[];
var CCARD_availablecard_array=[];
var CCARD_custcard_array=[];
var CCARD_check_cardclick_count=0;var CCARD_check_cardlistbox=0;
CCARD_availablecard_array=result_card[1];
CCARD_custcard_array=result_card[0]
var CCARD_cardlbl_array=[];
var CCARD_fname=$('#CCARD_tb_firstname').val();
var CCARD_lname=$('#CCARD_tb_lastname').val();
var name=CCARD_fname+'_'+CCARD_lname
CCARD_cardlbl_array=result_card[2];
var CCARD_availablecard_array_length=CCARD_availablecard_array.length;
var CCARD_custcard_array_length=CCARD_custcard_array.length;
var len=CCARD_availablecard_array_length+CCARD_custcard_array_length
for(var i=0;i<len;i++)
{
var CCARD_cardno_check=$('#CCARD_cb_cardnumber'+i).is(":checked");
if(CCARD_cardno_check==true)
{
$('#CCARD_lb_selectnamelist'+i).removeAttr('disabled');
var CCARD_cardlist_box=$('#CCARD_lb_selectnamelist'+i).val();
var CCARD_cardno=$('#CCARD_cb_cardnumber'+i).val();
if(CCARD_cardlist_box!="SELECT"){
$('#CCARD_lb_selectnamelist'+i).attr("disabled","disabled");
$('#CCARD_ta_selectnamelist1'+i).val(CCARD_cardno+'/'+CCARD_cardlist_box);
CCARD_cardlist.push(CCARD_cardlist_box);
}
else
{
CCARD_check_cardlistbox++;
}
CCARD_check_cardclick_count++;
}
}
var CCARD_available_cardlbl=[];
//difference between two arrays
var CCARD_available_cardlbl=CCARD_card_diffArray(CCARD_cardlbl_array,CCARD_cardlist);
for(var j=0;j<len;j++)
{
var CCARD_check=$('#CCARD_cb_cardnumber'+j).is(":checked");
var CCARD_cardlist_box=$('#CCARD_lb_selectnamelist'+j).val();
if(CCARD_cardlist_box=="SELECT")
{
$('#CCARD_lb_selectnamelist'+j).empty();
var CCARD_cardlbl_options ='<option>SELECT</option>'
for(var l=0;l<CCARD_available_cardlbl.length;l++)
{
name=name.replace(/ /g,"__")
if(name==CCARD_available_cardlbl[l])
{
var CCARD_custname=CCARD_available_cardlbl[l]
var CCARD_custname1=CCARD_custname.replace(/__/g," ")
var name1=CCARD_custname1.split('_');
var customername1=name1[0]+' '+name1[1]
CCARD_cardlbl_options += '<option value="' + CCARD_custname + '">' + customername1 + '</option>';
}
else{
CCARD_cardlbl_options += '<option value="' + CCARD_available_cardlbl[l] + '">' + CCARD_available_cardlbl[l] + '</option>';
}
}
$('#CCARD_lb_selectnamelist'+j).html(CCARD_cardlbl_options);

$('#CCARD_lb_selectnamelist'+j).attr("enabled","enabled")
}
if(CCARD_check==true)
{
$('#CCARD_lb_selectnamelist'+j).show();
$('#CCARD_lb_selectnamelist'+j).attr("enabled","enabled")
}
else
{$('#CCARD_lb_selectnamelist'+j)[0].selectedIndex = 0;
$('#CCARD_lb_selectnamelist'+j).hide();
$('#CCARD_ta_selectnamelist1'+j).val('');
}
}
if((CCARD_check_cardclick_count==4))
{
for(var i=0;i<len;i++)
{
var CCARD_check=$('#CCARD_cb_cardnumber'+i).is(":checked");
if(CCARD_check==false)
{
$('#CCARD_cb_cardnumber'+i).attr("disabled","disabled");
}
}
}
else
{
if(CCARD_check_cardlistbox==0)
{
for(var i=0;i<len;i++)
{
var CCARD_check=$('#CCARD_cb_cardnumber'+i).is(":checked");
if(CCARD_check==false)
{
$('#CCARD_cb_cardnumber'+i).removeAttr('disabled');
}
}
}
else
{
for(var i=0;i<len;i++)
{
var CCARD_check=$('#CCARD_cb_cardnumber'+i).is(":checked");
if(CCARD_check==false)
{
$('#CCARD_cb_cardnumber'+i).attr("disabled","disabled");
}
}
}
}
CCARD_submit_validate(result_card);
});
///////////***********SUBMIT BUTTON VALIDATION FUNCTION**************//////////////
function CCARD_submit_validate(result_card)
{
var CCARD_fname=$('#CCARD_tb_firstname').val();
var CCARD_lname=$('#CCARD_tb_lastname').val();
var CCARD_availablecard_array=[];
var CCARD_custcard_array=[];
CCARD_availablecard_array=result_card[1];
CCARD_custcard_array=result_card[0]
var guest_card=[]
var CCARD_availablecardarray_length=CCARD_availablecard_array.length;
var CCARD_custcard_array_length=CCARD_custcard_array.length;
var len=CCARD_availablecardarray_length+CCARD_custcard_array_length
var printarray=[];
var CCARD_uncheck_accesscard_flag=0;
var CCARD_check_accesscard_flag=0;
for(var k=0;k<len;k++)
{
var access_card= $('#CCARD_cb_cardnumber'+k).is(":checked");
if(access_card==true)
{
CCARD_check_accesscard_flag++;
}
else
{
CCARD_uncheck_accesscard_flag++;
}
}
if(CCARD_check_accesscard_flag==0||CCARD_lname=="")
{
$('#CCARD_btn_submitbutton').attr("disabled","disabled");
$('#CCARD_lbl_error').hide();
}
else
{
$('#CCARD_btn_submitbutton').removeAttr('disabled');
$('#CCARD_lbl_error').hide();
var CCARD_custname="";
if(CCARD_fname!=""&&CCARD_lname!="")
{
CCARD_custname=(CCARD_fname+"_"+CCARD_lname).toUpperCase();
CCARD_custname=CCARD_custname.replace(/ /g,"__")
}
var CCARD_set_matchname_flag=0;var CCARD_set_accesscard_check_flag=0;var flag2=0;

for(var i=0;i<len;i++)
{
var CCARD_cardlist_box=$('#CCARD_lb_selectnamelist'+i).val();
var CCARD_accesscard_check=$('#CCARD_cb_cardnumber'+i).is(":checked");
if(CCARD_accesscard_check==true)
{
CCARD_set_accesscard_check_flag=1;

if(CCARD_custname!="")
{
if(CCARD_cardlist_box.match(CCARD_custname))
{
CCARD_set_matchname_flag=1;
}
}
if(CCARD_cardlist_box=="SELECT")
{
flag2=1;
}
}
}
if(CCARD_set_accesscard_check_flag==1)
{
if(CCARD_set_matchname_flag==0)
{
$('#CCARD_lbl_error').text(CCARD_errorAarray[2])
$('#CCARD_lbl_error').show();
$('#CCARD_btn_submitbutton').attr("disabled","disabled");
}
else
{
$('#CCARD_lbl_error').text("");
}
if(flag2==1){
$('#CCARD_btn_submitbutton').attr("disabled","disabled");
}
}
else
{
$('#CCARD_lbl_error').text("");
}
if(CCARD_set_accesscard_check_flag!=1)
{
$('#CCARD_btn_submitbutton').attr("disabled","disabled");
}
//}
}
}
//***FUNCTION TO CLEAR FORM ***********//
function CCARD_clear(CARD_FLAG){
$(".preloader").hide();
$('#CCARD_div_cardassigned').hide();
$('#CCARD_lbl_cname').hide();
$('#CCARD_lb_selectname').hide();
$('#CCARD_lb_selectname').prop('selectedIndex',0);
$('#CCARD_lb_selectunit').prop('selectedIndex',0);
$('#CCARD_lbl_recver').hide();
$('#CCARD_lb_selecrecver').hide();
$('#CCARD_tble_id tr').remove();
$('#CCARD_btn_submitbutton').attr("disabled","disabled");
$('#CCARD_btn_submitbutton').hide();
$('#CCARD_btn_resetbutton').hide();
$('input:radio[name=ccard_id]').attr('checked',false);
if(CARD_FLAG==1){
$(document).doValidation({rule:'messagebox',prop:{msgtitle:"CARD ASSIGN",msgcontent:CCARD_errorAarray[1]}});
}
else{
if(CARD_FLAG!=0){
$(document).doValidation({rule:'messagebox',prop:{msgtitle:"CARD ASSIGN",msgcontent:CARD_FLAG}});
}
else{
$(document).doValidation({rule:'messagebox',prop:{msgtitle:"CARD ASSIGN",msgcontent:CCARD_errorAarray[5]}});
}
}
}
//**********FUNCTION TO COMPARE TWO ARRAY********************//
function CCARD_card_diffArray(a, b) {
var seen = [], diff = [];
for ( var i = 0; i < b.length; i++)
seen[b[i]] = true;
for ( var i = 0; i < a.length; i++)
if (!seen[a[i]])
diff.push(a[i]);
return diff;
}
$('#CCARD_lbl_unitno').hide();
 $('#CCARD_lb_selectunit').hide();
//SUBMIT BUTTON CLICK
$('#CCARD_btn_submitbutton').click(function(){
$(".preloader").show();
google.script.run.withFailureHandler(CCARD_error).withSuccessHandler(CCARD_clear).CCARD_cardassign_save(document.getElementById('CCARD_form_cardassignform'))
});
$('#CCARD_btn_resetbutton').click(function(){
$('#CCARD_div_cardassigned').hide();
$('#CCARD_lbl_cname').hide();
$('#CCARD_lb_selectname').hide();
$('#CCARD_lb_selectname').prop('selectedIndex',0);
$('#CCARD_lb_selectunit').prop('selectedIndex',0);
$('#CCARD_lbl_recver').hide();
$('#CCARD_lb_selecrecver').hide();
$('#CCARD_tble_id tr').remove();
$('#CCARD_btn_submitbutton').attr("disabled","disabled");
$('#CCARD_btn_submitbutton').hide();
$('#CCARD_btn_resetbutton').hide();
$('input:radio[name=ccard_id]').attr('checked',false);
$('#CCARD_tble_avail_cardno tr').remove();
$('input:radio[name=CCARD_selectcard]').attr('checked',false);
});
//FUNCTION TO CONVERT DATE FORMAT
function FormTableDateFormat(inputdate){
var string = inputdate.split("-");
return string[2]+'-'+ string[1]+'-'+string[0];
}
});
</script>
<!--SCRIPT TAG END-->
</head>
<!--HEAD TAG END-->
<!--BODY TAG START-->
<body>
<div class="wrapper">
<div  class="preloader MaskPanel"><div class="preloader statusarea" ><div style="padding-top:90px; text-align:center"><img src="https://googledrive.com/host/0B5pkfK_IBDxjU1FrR3hVTXB4a28/Loading.gif"  /></div></div></div>
<div class="title" id="fhead" ><div style="padding-left:500px; text-align:left;"><p><h3>CUSTOMER CARD ASSIGN</h3><p></div></div>
<form action="" id="CCARD_form_cardassignform" name="CCARD_cardassign_form" class ='content'>
<table>
<tr><td>
<table id='CCARD_tble_unittable' cellspacing="7" >
<tr>
<td style="width:245px"><lable id="CCARD_lbl_unitno" >UNIT NUMBER<em>*</em></lable></td>
<td><select id='CCARD_lb_selectunit' name="CCARD_unitnumber"   >
<option value='SELECT' selected="selected"> SELECT</option>
</select></td></tr>
<tr><td style="width:245px"><lable for='cname' id='CCARD_lbl_cname'>CUSTOMER NAME<em>*</em></lable></td>
<td><select id='CCARD_lb_selectname' name="CCARD_name"   >   
<option value='SELECT' selected="selected"> SELECT</option>
</select></td></tr>
<tr><td></td><td>
<table id='CCARD_tble_id' name='ccard_id'></table></td></tr>
</table></td></tr>
<tr><td >
<table id='CCARD_tble_recver' cellspacing="5" hidden>
<tr>
<td style="width:250px">&nbsp;<lable id="CCARD_lbl_recver" >LEASE PERIOD<em>*</em></lable></td>
<td><select id='CCARD_lb_selecrecver' name="CCARD_recver"   >
<option value='SELECT' selected="selected"> SELECT</option>
</select></td></tr></table></td></tr>
<tr><td>&nbsp;
<label align='bottom' name='error' id='CCARD_lbl_err' visible="false" class='errormsg' /></td>
</tr>
<tr><td>
<div id="CCARD_div_cardassigned" hidden>
<table id='CCARD_tble_personaldetails'   >
<tr>
<td style="width:255px">&nbsp;<label>FIRST NAME</label></td><td> <input type="text" name="CCARD_tb_firstname" id="CCARD_tb_firstname"  maxlength="50" class="rdonly"  readonly /></td> <td><input type="text" name="CCARD_tb_firstname1" id="CCARD_tb_firstname1"  maxlength="50" style="width:250px;visibility:hidden;"  /></td>
</tr>
<tr>
<td style="width:245px">&nbsp;<label>LAST NAME</label></td><td> <input type="text" name="CCARD_tb_lastname" id="CCARD_tb_lastname"  maxlength="50" class="rdonly"  readonly /></td> <td><input type="text" name="CCARD_tb_lastname1" id="CCARD_tb_lastname1"  maxlength="50" style="width:250px;visibility:hidden;" /></td>
</tr>
<tr>
<td style="width:245px">&nbsp;<label>COMPANY NAME</label></td><td> <input type="text" name="CCARD_tb_companyname" id="CCARD_tb_companyname"  class="rdonly"  readonly /></td> 
</tr>
<tr>
<td style="width:245px">&nbsp;<label>EMAIL ID</label></td><td> <input type="text" name="CCARD_tb_email" id="CCARD_tb_email"  maxlength="50" class="rdonly" readonly/></td> 
</tr>
<tr>
<td style="width:245px">&nbsp;<label>MOBILE NO</label></td><td> <input type="text" name="CCARD_tb_mobileno" id="CCARD_tb_mobileno"  maxlength="6" style="width:60px;"class="rdonly" readonly/></td> 
</tr>
<tr>
<td style="width:245px">&nbsp;<label>INT'L MOBILE NO</label></td><td> <input type="text" name="CCARD_tb_intmobileno" id="CCARD_tb_intmobileno"  maxlength="15" style="width:110px;" class="rdonly" readonly /></td>
</tr>
<tr>
<td style="width:245px">&nbsp;<label>OFFICE NO</label></td><td> <input type="text" name="CCARD_tb_officeno" id="CCARD_tb_officeno"  maxlength="8" style="width:60px;" class="rdonly" readonly /></td> 
</tr>
<tr>
<td style="width:245px">&nbsp;<label>DATE OF BIRTH</label></td><td> <input type="text" name="CCARD_tb_dob" id="CCARD_tb_dob"  maxlength="50" style="width:75px;" class="rdonly" readonly/></td> 
</tr>
<tr>
<td style="width:245px">&nbsp;<label>NATIONALITY</label></td><td> <input type="text" name="CCARD_tb_nation" id="CCARD_tb_nation"  maxlength="50"  class="rdonly" readonly/></td> 
</tr>
<tr>
<td style="width:245px">&nbsp;<label style="width:230px">PASSPORT NUMBER</label></td><td> <input type="text" name="CCARD_tb_passno" id="CCARD_tb_passno"  maxlength="15" style="width:120px;" class="rdonly" readonly /></td> 
</tr>
<tr>
<td style="width:245px">&nbsp;<label style="width:230px">PASSPORT EXPIRY DATE</label></td><td> <input type="text" name="CCARD_tb_passdate" id="CCARD_tb_passdate"  maxlength="50" style="width:75px;" class="rdonly" readonly /></td> 
</tr>
<tr>
<td style="width:245px">&nbsp;<label>EP NUMBER</label></td><td> <input type="text" name="CCARD_tb_epno" id="CCARD_tb_epno"  maxlength="15" style="width:120px;" class="rdonly"readonly /></td> 
</tr>
<tr>
<td style="width:245px">&nbsp;<label>EP EXPIRY DATE</label></td><td> <input type="text" name="CCARD_tb_epdate" id="CCARD_tb_epdate"   style="width:75px;" class="rdonly" readonly /></td> 
</tr>
<tr>
<td style="width:245px">&nbsp;<label>ROOM TYPE</label></td><td> <input type="text" name="CCARD_tb_roomtype" id="CCARD_tb_roomtype" class="rdonly"  readonly /></td>
</tr>
<tr>
<td style="width:250px">&nbsp;<label  >CUSTOMER CARD </label></td><td> <input type="text" name="CCARD_tb_cardno" id="CCARD_tb_cardno"   style="width:50px;" readonly  /></td><td><input type="text" name="CCARD_tb_cardno1" id="CCARD_tb_cardno1"  maxlength="50" style="width:75px;visibility:hidden;" /></td>
</tr>
</table>
<table id="CCARD_tble_cardno_radio">
<tr>
<td style="width:255px">&nbsp;<label style="width:250px">SELECT THE CARD <em>*</em></label></td><td><input type="radio" name="CCARD_selectcard" id="CCARD_radio_selectcard" value='CARD' class='radio_selected'  /></td><td><label>CARD NUMBER</label></td><td><label></label><label align='bottom' name='error' id='CCARD_lbl_error' visible="false" class='errormsg' ></label></td>
</tr></table>
<table id="CCARD_tble_avail_cardno"></table>
<table id="CCARD_tble_feedetails">
<tr>
<td></td><td><input type="radio" name="CCARD_selectcard" id="CCARD_radio_null" value='NULL' class='radio_selected' /><label>NULL </label></td>
</tr>
<tr>
<td style="width:255px">&nbsp;<label>CHECK IN DATE</label></td><td> <input type="text" name="CCARD_tb_startdate" id="CCARD_tb_startdate"   style="width:75px;" class="rdonly" readonly   /></td> 
</tr>
<tr>
<td style="width:240px">&nbsp;<label style="width:230px">CHECK OUT DATE</label></td><td> <input type="text" name="CCARD_tb_enddate" id="CCARD_tb_enddate"   style="width:75px;" class="rdonly" readonly /></td><td><input type="text" name="CCARD_tb_enddate1" id="CCARD_tb_enddate1"  maxlength="50" style="width:75px;visibility:hidden;" /></td>
</tr>
<tr>
<td style="width:240px">&nbsp;<label>NOTICE PERIOD</label></td><td> <input type="text" name="CCARD_tb_noticeperiod" id="CCARD_tb_noticeperiod"   style="width:30px;" class="rdonly" readonly /></td> 
</tr>
<tr>
<td style="width:240px">&nbsp;<label>NOTICE DATE</label></td><td> <input type="text" name="CCARD_tb_noticedate" id="CCARD_tb_noticedate"   style="width:75px;" class="rdonly" readonly /></td> 
</tr>
<tr>
<td style="width:240px">&nbsp;<label style="width:230px">ELECTRICITY CAPPED</label></td><td> <input type="text" name="CCARD_tb_elect" id="CCARD_tb_elect"   style="width:45px;" class="rdonly" readonly /></td> 
</tr>
<tr>
<td style="width:240px">&nbsp;<label id="CCARD_lbl_fixedfee" style="width:230px"  >AIRCON FIXED FEE</label></td><td> <input type="text" name="CCARD_tb_fixed" id="CCARD_tb_fixed"   style="width:45px;" class="rdonly" readonly  /></td> 
</tr>
<tr>
<td style="width:240px">&nbsp;<label style="width:240px">CURTAIN DRY CLEANING FEE</label></td><td> <input type="text" name="CCARD_tb_drycleanfee" id="CCARD_tb_drycleanfee"  maxlength="50" style="width:45px;" class="rdonly" readonly/></td> 
</tr>
<tr>
<td style="width:240px">&nbsp;<label style="width:230px">CHECKOUT CLEANING FEE</label></td><td> <input type="text" name="CCARD_tb_checkoutcleaningfee" id="CCARD_tb_checkoutcleaningfee"  maxlength="50" style="width:45px;" class="rdonly" readonly /></td> 
</tr>
<tr>
<td>&nbsp;<label>DEPOSIT</label></td><td> <input type="text" name="CCARD_tb_deposit" id="CCARD_tb_deposit"  maxlength="50" style="width:55px;" class="rdonly" readonly/></td> 
</tr>
<tr>
<td style="width:240px">&nbsp;<label>RENT</label></td><td> <input type="text" name="CCARD_tb_rent" id="CCARD_tb_rent"  maxlength="50" style="width:55px;" class="rdonly" readonly/></td>
</tr>
<tr>
<td style="width:250px">&nbsp;<label style="width:230px">PROCESSING COST</label></td><td> <input type="text" name="CCARD_tb_processingfee" id="CCARD_tb_processingfee"  maxlength="50" style="width:55px;" class="rdonly" readonly/></td> 
</tr>
</table>
<table id='CCARD_tble_comment'><tr>
<td style="width:255px"><label>COMMENTS</label></td><td> <textarea name="CCARD_ta_comments" id="CCARD_ta_comments"    ></textarea></td> 
</tr></table>
<tr>
<table id="CCARD_tble_guest_cardno" hidden>
</table></tr>
<div  id="CCARD_div_buttons" style="position:relative;left:130px;" >
<table>
<tr>
<td ><input class="btn" type="button"  id="CCARD_btn_submitbutton" name="submit" value="ASSIGN"  disabled/></td>
<td><input class="btn" type="button"  id="CCARD_btn_resetbutton" name="reset" value="RESET"  /></td>
</tr>
</table>
</div></div></td></tr>
</table>
</form>
</div>
</body>
<!--BODY TAG END-->
</html>
<!--HTML TAG END-->